<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>Megastar Ferry</title><!-- Fonts -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700"><!-- Icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css" type="text/css">
  <link rel="stylesheet" href="https://demos.creative-tim.com/argon-dashboard/assets/vendor/nucleo/css/nucleo.css" type="text/css"><!-- CSS -->
  <link rel="stylesheet" href="https://demos.creative-tim.com/argon-dashboard/assets/css/argon.min.css?v=1.2.0" type="text/css">
</head>

<body>
  <div class="main-content" id="panel">
      <nav class="navbar navbar-top navbar-expand navbar-dark border-bottom bg-dark" id="navbarTop" data-toggle="modal" data-target="#navbarModal">
          <div class="container-fluid">
              <div class="collapse navbar-collapse" id="navbarSupportedContent">

                  <ul class="navbar-nav align-items-center  ml-auto ml-md-0 ">
                      <li class="nav-item dropdown"><a class="nav-link pr-0" href="#" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                              <div class="media align-items-center"><span class="avatar avatar-sm rounded-circle"><img alt="Image placeholder" src="https://th.bing.com/th/id/R3b54b3e3ccc6c56c0551173a21c7435c?rik=DaAOrhvibL9T%2fg&pid=ImgRaw"></span>
                                  <div class="media-body  ml-2  d-none d-lg-block"><span class="mb-0 text-sm  font-weight-bold">Megastar</span></div>
                              </div>
                          </a>
                          <div class="dropdown-menu dropdown-menu-right">
                              <div class="dropdown-header noti-title">
                                  <h6 class="text-overflow m-0">Welcome!</h6>
                              </div><a href="#!" class="dropdown-item"><i class="fa fa-user"></i><span>My profile</span></a><a href="#!" class="dropdown-item"><i class="fa fa-tools"></i><span>Settings</span></a><a href="#!" class="dropdown-item"><i class="far fa-calendar"></i><span>Activity</span></a> <a href="#!" class="dropdown-item"><i class="fa fa-phone"></i><span>Support</span></a>
                              <div class="dropdown-divider"></div><a href="#!" class="dropdown-item"><i class="fa fa-sign-out-alt"></i><span>Logout</span></a>
                          </div>
                      </li>
                  </ul>
              </div>
          </div>
      </nav>
      <div class="container-fluid pt-3">
          <div class="row removable">
              <div class="col-lg-6">
                  <div class="card card-stats">
                      <div class="card-body">
                          <div class="row">
                              <div class="col">
                                  <h5 class="card-title text-uppercase text-muted mb-0">Predicted Time Of Arrival</h5><span class="h2 font-weight-bold mb-0">2,356</span>
                              </div>
                              <div class="col-auto">
                                  <div class="icon icon-shape bg-orange text-white rounded-circle shadow"><i class="fa fa-chart-pie"></i></div>
                              </div>
                          </div>
                          <p class="mt-3 mb-0 text-sm"><span class="text-success mr-2"><i class="fa fa-arrow-up"></i> 3.48%</span><span class="text-nowrap">Since last month</span></p>
                      </div>
                  </div>
              </div>
              <div class="col-lg-6">
                  <div class="card card-stats">
                      <div class="card-body">
                          <div class="row">
                              <div class="col">
                                  <h5 class="card-title text-uppercase text-muted mb-0">Ship Monitoring</h5><span class="h2 font-weight-bold mb-0">2,356</span>
                              </div>
                              <div class="col-auto">
                                  <div class="icon icon-shape bg-orange text-white rounded-circle shadow"><i class="fa fa-chart-pie"></i></div>
                              </div>
                          </div>
                          <p class="mt-3 mb-0 text-sm"><span class="text-success mr-2"><i class="fa fa-arrow-up"></i> 3.48%</span><span class="text-nowrap">Since last month</span></p>
                      </div>
                  </div>
              </div>
          </div>
          <div class="row removable">
              <div class="col-lg-6">
                <script type="text/javascript">
                  width='100%';		// the width of the embedded map in pixels or percentage
                  height='100%';		// the height of the embedded map in pixels or percentage
                  border='0';		// the width of the border around the map (zero means no border)
                  shownames='true';	// to display ship names on the map (true or false)
                  latitude='59.835118635248804';	// the latitude of the center of the map, in decimal degrees
                  longitude='24.851873059808067';	// the longitude of the center of the map, in decimal degrees , 
                  zoom='15';		// the zoom level of the map (values between 2 and 17)
                  maptype='0';		// use 0 for Normal Map, 1 for Satellite
                  trackvessel='276829000';	// MMSI of a vessel (note: vessel will be displayed only if within range of the system) - overrides "zoom" option
                  fleet='';		// the registered email address of a user-defined fleet (user's default fleet is used)
                </script>
                <script type="text/javascript" src="https://www.marinetraffic.com/js/embed.js"></script>
              </div>
              <div class="col-lg-6">
                  <div class="card">
                      <div class="card-header border-0">
                          <div class="row align-items-center">
                              <div class="col">
                                  <h3 class="mb-0">Position History</h3>
                              </div>
                          </div>
                      </div>
                      <div class="table-responsive">
                          <table class="table align-items-center table-flush">
                              <thead class="thead-light">
                                  <tr>
                                      <th scope="col">Latitude</th>
                                      <th scope="col">Longitude</th>
                                      <th scope="col">Speed</th>
                                      <th scope="col">Direction</th>
                                  </tr>
                              </thead>
                              <tbody>
                                  <tr>
                                      <th scope="row">99,03</th>
                                      <td>4,569</td>
                                      <td>$452,460</td>
                                      <td><i class="fas fa-arrow-up text-success mr-3"></i> 46,53%</td>
                                  </tr>
                                
                              </tbody>
                          </table>
                      </div>
                  </div>
                  <div class="card">
                      <div class="card-body">
                          <h5 class="card-title">Ship Journey Note</h5>
                          <p class="card-text" spellcheck="false">The ship's motion is normal.</p><a href="#" class="btn btn-primary btn-sm">Read more</a>
                      </div>
                  </div>
              </div>
          </div>

      </div>
      <footer class="footer pt-0 px-4">
          <div class="row align-items-center justify-content-lg-between">
              <div class="col-lg-6">
                  <div class="copyright text-center  text-lg-left  text-muted">
                      Â© 2021 Made with<a href="https://www.creative-tim.com/product/argon-dashboard" class="font-weight-bold ml-1" target="_blank">Argon Dashboard</a>
                  </div>
              </div>
              <div class="col-lg-6">
                  <ul class="nav nav-footer justify-content-center justify-content-lg-end">
                      <li class="nav-item">
                          <a href="javascript:void(0);" class="nav-link">About us</a>
                      </li>
                      <li class="nav-item">
                          <a href="javascript:;" class="nav-link">Company</a>
                      </li>
                      <li class="nav-item">
                          <a href="javascript:;" class="nav-link">Blog</a>
                      </li>
                      <li class="nav-item">
                          <a href="javascript:;" class="nav-link">Contact</a>
                      </li>
                  </ul>
              </div>
          </div>
      </footer>
  </div>
  <script src="https://demos.creative-tim.com/argon-dashboard/assets/vendor/jquery/dist/jquery.min.js"></script>
  <script src="https://demos.creative-tim.com/argon-dashboard/assets/vendor/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://demos.creative-tim.com/argon-dashboard/assets/vendor/js-cookie/js.cookie.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.4/dist/Chart.min.js"></script>
  <script src="https://demos.creative-tim.com/argon-dashboard/assets/vendor/chart.js/dist/Chart.extension.js"></script>
  <script src="https://demos.creative-tim.com/argon-dashboard/assets/js/argon.min.js?v=1.2.0"></script>
        <!-- Load tensorflow.js -->
        <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@2.0.0/dist/tf.min.js"></script>
        <script>
          var isDepartingFromHelsinki = true;
          var Threshold = 2.5;
          async function f() {
            fetch('https://meri.digitraffic.fi/api/v1/locations/latest/276829000')
              .then(response => response.json())
              .then(async function(data){
                    console.log(data)
                    var baseData = data.features[0]
                    var tensorInput = tf.tensor2d([baseData.geometry.coordinates[1], baseData.geometry.coordinates[0], baseData.properties.sog,baseData.properties.cog,baseData.properties.heading], [1,5]);

                    const model = await tf.loadLayersModel('https://sseun43.github.io/MegastarShipETAPrediction/helsinkiTripETA/model.json');
                    var helsinkiTripModel = model.predict(tensorInput).arraySync()[0][0]
                  
                    const fin_health_model = await tf.loadLayersModel('https://sseun43.github.io/MegastarShipETAPrediction/helsinkiTripETA/helsinkiTripHealth/model.json');
                    console.log(fin_health_model.predict(tf.tensor2d([60.1475,24.9149,2.8,197,205], [1,5]))/*.arraySync()[0][0]*/)
                    var helsinkiHealthModel = tf.metrics.meanAbsoluteError(fin_health_model.predict(tensorInput).arraySync()[0],tensorInput)

                    const est_eta_model = await tf.loadLayersModel('https://sseun43.github.io/MegastarShipETAPrediction/helsinkiTripETA/tallinnTripETA/model.json');
                    var tallinnTripModel = est_eta_model.predict(tensorInput).arraySync()[0][0]

                    const est_health_model = await tf.loadLayersModel('https://sseun43.github.io/MegastarShipETAPrediction/helsinkiTripETA/tallinnTripHealth/model.json');
                    console.log(est_health_model.predict(tf.tensor2d([60.1475,24.9149,2.8,197,205], [1,5]))/*.arraySync()[0][0]*/)
                    var tallinnHealthModel = tf.metrics.meanAbsoluteError(est_health_model.predict(tensorInput).arraySync()[0],tensorInput)

                    console.log(helsinkiTripModel, helsinkiHealthModel, tallinnTripModel, tallinnHealthModel)
              });
          }
          f()
        </script>
</body>